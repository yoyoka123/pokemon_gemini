# 3D宝可梦世界

这是一个基于Three.js的3D宝可梦捕捉游戏。在这个游戏中，你可以在3D世界中探索、攻击和捕捉宝可梦。

## 游戏特点

- 实时3D环境，包含树木、岩石和地形
- 第一人称视角控制
- 10只不同的宝可梦同时存在于游戏世界中
- 超过50种可捕捉的宝可梦
- 基于物理的精灵球投掷机制
- 宝可梦捕获系统
- 背包系统管理已捕获的宝可梦

## 新增功能：无限地图系统

项目现在支持无限地图系统，具有以下特点：

1. **动态地图块加载**：
   - 地图被分割成大小相等的区块（Chunks）
   - 玩家移动时，系统自动加载周围的地图块并卸载远处的地图块
   - 每个地图块包含独特的地形、树木和岩石

2. **资源优化**：
   - 远离玩家的地图块会被自动卸载，释放内存和GPU资源
   - 对象在卸载时会正确释放所有资源（几何体、材质、纹理）

3. **无边界探索**：
   - 移除了原有的边界墙，玩家可以无限制地探索世界
   - 宝可梦会在玩家周围区域随机生成，确保探索过程中总有宝可梦可供捕捉

4. **持续世界生成**：
   - 每个新加载的地图块都会有独特的内容
   - 远离玩家太远的宝可梦会消失，并在周围重新生成

## 操作方法

- **WASD**: 移动
- **鼠标**: 视角控制
- **鼠标左键**: 攻击宝可梦
- **鼠标右键**: 投掷精灵球
- **B键**: 打开/关闭背包
- **空格键**: 跳跃

## 游戏玩法

1. 使用WASD和鼠标在游戏世界中移动
2. 找到宝可梦，先用鼠标左键攻击减弱它们
3. 当宝可梦生命值较低时，用鼠标右键投掷精灵球捕捉
4. 按B键查看已捕获的宝可梦

## 技术栈

- HTML5
- CSS3
- JavaScript
- Three.js

## 在线游玩

你可以访问以下链接在线游玩这个游戏:
[3D宝可梦世界](https://yoyoka123.github.io/pokemon_gemini/)

## 项目结构

```
pokemon_gemini/
├── index.html       # 主HTML文件
├── style.css        # 样式表
├── js/              # JavaScript文件
│   ├── game.js      # 游戏主逻辑
│   ├── world.js     # 游戏世界
│   ├── player.js    # 玩家控制
│   ├── pokemon.js   # 宝可梦类
│   ├── bag.js       # 背包系统
│   └── models.js    # 模型加载工具
├── models/          # 3D模型文件
└── textures/        # 贴图文件
    ├── pokemon/     # 宝可梦图像
    └── skybox/      # 天空盒贴图
```

## 技术说明

本游戏使用以下技术构建：

- Three.js - 3D渲染引擎
- GLTFLoader - 加载3D模型
- PointerLockControls - 第一人称控制

## 如何运行

1. 确保你有一个支持WebGL的现代浏览器
2. 克隆或下载此仓库
3. 使用本地服务器运行项目（例如使用Python的`http.server`或Node.js的`http-server`）
4. 在浏览器中打开项目

```bash
# 例如使用Python创建本地服务器
python -m http.server
# 然后在浏览器访问 http://localhost:8000
```

### 操作说明

- WASD：移动
- 空格：跳跃
- 鼠标左键：攻击
- 鼠标右键：投掷精灵球
- B键：打开/关闭背包

## 宝可梦3D模型的使用

项目现在包含了以下宝可梦的3D模型：

1. **主要宝可梦**：
   - 妙蛙种子及其进化链（妙蛙草、妙蛙花）
   - 小火龙及其进化链（火恐龙、喷火龙）
   - 杰尼龟及其进化链（卡咪龟、水箭龟）
   - 皮卡丘及其进化（雷丘）
   - 伊布及其进化（水伊布、雷伊布、火伊布）
   - 胖丁

2. **其他宝可梦**：
   - 藤蛇
   - 电飞鼠
   - 顽皮熊猫
   - 宝宝暴龙

所有这些模型都是使用`download_pokemon_models.sh`脚本从开源仓库中下载的。脚本会自动尝试从多个源下载模型，并在下载失败时使用备用模型。

### 如何下载更多模型

如果你需要添加更多的宝可梦模型，可以运行以下命令：

```bash
./download_pokemon_models.sh
```

脚本会自动尝试下载所有配置的宝可梦模型，并将结果保存在`models`目录中。

### 关于兜底模型

对于无法获取真实3D模型的宝可梦，游戏会使用以下兜底模型：

- 鳄梨(Avocado)模型：作为草系宝可梦的替代
- 鸭子(Duck)模型：作为水系宝可梦的替代
- 牛奶卡车(CesiumMilkTruck)模型：作为其他类型宝可梦的替代
